<!DOCTYPE html>
<html>
    
    <head>
        <meta charset="utf-8" />
        <title>USTC北京队比赛分组</title>
        <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
        <style type="text/css">
            table,td{ border: 1px solid #888; } td{ width: 200px; height: 30px; }
            #start-group {
                /*width: 100px;*/
                height: 30px;
                line-height: 30px;
                margin: 10px;
                border-radius: 3px;
                text-align: center;
                vertical-align: middle;
                font-family: 微软雅黑;
                cursor: pointer;
                color: rgba(3, 119, 3, 0.729412);
                background: rgba(67, 245, 9, 0.0980392);
            }
            .group-result {
                background: #c4dcf9;
                padding: 10px;
                margin-top: 10px;
                border-radius: 5px;
            }
            [target="_blank"]{
                display: none;
            }
            .logo{
                float: right;
            }
            .grouping{
                clear: both;
            }
            .head-title{
                margin: 0;
                padding-top: 31px;
            }
        </style>
            <script src="js/jquery-1.6.4.min.js"></script>
    </head>
    
    <body>
    <img class="logo" src="../img/logo.png">
    <h2 class="head-title">中国科大北京校友队内部比赛分组器</h2>
    <div class="grouping">
    	<h3>此次报名人员编号如下：</h3>
    	<div class="group-all">1崔连喜，2单列，3唐凯，4刘仲熙，5董为，6沈春华，7庄宏，8周旭，9李杰，10解锐，11唐海东，12许征，13彭力强，14陆强，15沈烁，16周立刚，17白强，18李匡正，19陆凌炜，20蔡延安，21方海，22贾御龙</div>
    </div>
    <div id="start-group" onclick="randomGroup()" >我来随机分</div>
    <div class="group-result">每人只能分组一次</div>
        <script type="text/javascript">
        var times = 0;
        var list = $(".group-all").html().replace(/( |,|，)+/g, " ").replace(/^ | $/g, "").split(" ");
        var randomGroup = function(){
        	times++;
            // $('.group-result').append('第'+times+'种分组方法<br>');
        	$('.group-result').append('<br>您为球队此次内部比赛进行的随即分组如下：<br>');
            var arr = create_group(22, 2);
            function create_group(num, group_num) {
                var group = new Array();
                var check_arr = new Array();
                for (var i = 0; i < group_num; i++) {
                    var arr1 = new Array();
                    for (var j = 0; j < num / group_num; j++) {
                        var value = Math.ceil(Math.random(0, num) * num);
                        while (check_arr.indexOf(value) != -1) {
                            value = Math.ceil(Math.random(0, num) * num);
                        }
                        check_arr.push(value);
                        arr1.push(value);
                    }
                    group.push(arr1);
                }
                return group;
            }
            var table = document.createElement('table');
            for (var i = 0; i < arr.length; i++) {
                var tr = document.createElement('tr');
                for (var j = 0; j < arr[i].length; j++) {
                    var td = document.createElement('td');
                    td.innerText = list[arr[i][j]-1];
                    tr.appendChild(td);
                }
                table.appendChild(tr);
            }
            $('.group-result').append(table);
            $('.group-result').append('<br>');
            $('#start-group').remove();
        }
        </script>
        <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1261570930'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s95.cnzz.com/z_stat.php%3Fid%3D1261570930' type='text/javascript'%3E%3C/scsript%3E"));</script>
        <!-- 微信分享 -->
        <script src='//res.wx.qq.com/open/js/jweixin-1.0.0.js'></script>
        <script type="text/javascript">
            // ------微信分享------------
            if (wx) {
              wx.config({
                debug: false,
                appId: 'wx8cd5624eda2c0a61',
                timestamp: parseInt(Date.now()/1000),
                nonceStr: '58927f6c-a853-49dc-ab76-49d3c78b690a',
                signature: '58927f6c-a853-49dc-ab76-49d3c78b690a',
                jsApiList: ["onMenuShareTimeline", "onMenuShareAppMessage", "onMenuShareQQ", "onMenuShareWeibo"]
              });

              var shareDate = {
                title: '中国科大北京校友足球队内部比赛分组',//shareData.title, // 分享标题
                content: '随即分组，每人一次，come on! 为中国科大北京校友足球队分上你宝贵的一组吧',//shareData.content, // 分享描述
                // link: shareData.link, // 分享链接
                pics: ['../img/logo.png'],//shareData.pics[0], // 分享图标
                type: '', // 分享类型,music、video或link，不填默认为link
                link: '//2013yulong.github.io/qijutian/?from=singlemessage#hongbao' // 如果type是music或video，则要提供数据链接，默认为空
              }
              var getShareon = function (data) {
                  console.log(data);
                  wx.ready(function () {
                    // 兼容方案 如果 shareon 挂掉了,使用默认图片
                    var imagesUrl = 'mfarm_files/qjt_logo.png';//shareData.WeiXinMoments.pics[0] || 
                    wx.onMenuShareTimeline({
                      title: shareData.content, // 分享标题
                      link: shareData.link, // 分享链接
                      imgUrl: imagesUrl,
                      success: function () {
                        // 用户确认分享后执行的回调函数
                      },
                      cancel: function () {
                        // 用户取消分享后执行的回调函数
                      }
                    });
                    wx.onMenuShareAppMessage({
                      title: shareData.title, // 分享标题
                      desc: shareData.content, // 分享描述
                      link: shareData.link, // 分享链接
                      imgUrl: shareData.pics[0], // 分享图标
                      type: '', // 分享类型,music、video或link，不填默认为link
                      dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
                      success: function () {
                        // 用户确认分享后执行的回调函数
                      },
                      cancel: function () {
                        // 用户取消分享后执行的回调函数
                      }
                    });
                    wx.onMenuShareQQ({
                      title: shareData.title, // 分享标题
                      desc: shareData.content, // 分享描述
                      link: shareData.link, // 分享链接
                      imgUrl: shareData.pics[0], // 分享图标
                      success: function () {
                        // 用户确认分享后执行的回调函数
                      },
                      cancel: function () {
                        // 用户取消分享后执行的回调函数
                      }
                    });
                    wx.onMenuShareWeibo({
                      title: shareData.title, // 分享标题
                      desc: shareData.content, // 分享描述
                      link: shareData.link, // 分享链接
                      imgUrl: shareData.pics[0], // 分享图标
                      success: function () {
                        // 用户确认分享后执行的回调函数
                      },
                      cancel: function () {
                        // 用户取消分享后执行的回调函数
                      }
                    });
                  });
                  wx.error(function (res) {
                    // console.log(res);
                  });
              }
            }
            getShareon(shareData);
          }
        </script>
    </body>

</html>
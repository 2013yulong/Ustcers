define("fusion-worker/dist/b-tabs/b-tabs",["require","fusion-worker/dist/deps/fusion.best","fusion-worker/dist/deps/naboo","fusion-worker/dist/deps/spark","fusion-worker/dist/deps/iscroll"],function(t){function s(t,s){for(;t.children().length>0&&t.children(s).length<1;)t=t.children();return t.children(s)}var e=t("fusion-worker/dist/deps/fusion.best"),n=t("fusion-worker/dist/deps/naboo"),o=t("fusion-worker/dist/deps/spark"),r=t("fusion-worker/dist/deps/iscroll");n.register("transform",function(t,s,e,n,r,a){var l=s.offsetWidth,i=a/l,c="translateX("+r+"px) scaleX("+i+")",h={transform:c,"-webkit-transform":c,"transform-origin":"left top","-webkit-transform-origin":"left top"};o.css3(s,h,e,n,0,function(){t()})});var a=function(){},l=function(){var t=this,e=$(t.panel);this.toggle=s(e,"."+t.toggleClass),this.view=s(e,"."+t.viewClass),this.wrapper=s(e,"."+t.navWrapperClass),this.navs=s(this.wrapper,"."+t.navClass),this.conts=s(e,"."+t.contClass),this.sum=this.navs.length,this.tabScroll=void 0,u.call(this),this.allowScroll&&this.view.length&&i.call(this),this.toggleMore&&this.allowScroll&&this.view.length&&c.call(this)},i=function(){function t(){var t=s.wrapper,e=parseInt(t.css("padding-left")||16),n=parseInt(t.css("padding-right")||16);s.navsWidth=e+n,s.navs.each(function(t,e){s.navsWidth+=$(e).width()}),s.wrapper.width(s.navsWidth+s.toggle.width())}var s=this;if(t(),s.tabScroll=new r(s.view[0],{disableMouse:!0,scrollX:!0,scrollY:!1,eventPassthrough:!0,scrollbars:!1}),s.current>0&&s.current<s.sum){var e=Math.min(s.current+1,s.sum-1),n=s.navs.eq(e);n.length&&n.position().left+n.width()>s.view.width()&&s.tabScroll.scrollToElement(s.navs[s.current],500,s.scrollSize,0,"",{autoScroll:!0})}"function"==typeof s.onTabScrollEnd&&s.tabScroll.on("scrollEnd",function(){this.customFlag&&this.customFlag.autoScroll||s.onTabScrollEnd.call(s,this)}),$("body").one("onlyshowMore.b_tabs",function(){s.timer=setTimeout(function(){t(),s.tabScroll.refresh()},0)})},c=function(){function t(){o.empty(),n.hide(),e.toggle.css({"-webkit-transform":"scaleY(1)",transform:"scaleY(1)"}),e.toggleState=0}function s(){o.html(e.navs.clone()),n.append(o),e.view.after(n.show()),e.toggle.css({"-webkit-transform":"scaleY(-1)",transform:"scaleY(-1)"}),e.toggleState=1}var e=this,n=$('<div class="c-tabs-nav-layer"><p>'+e.toggleLabel+"</p></div>"),o=$('<ul class="c-tabs-nav-layer-ul"></ul>');e.toggleState=0,o.on("click","."+e.navClass,function(){var s=$(this);e.navs.eq(s.attr("data-tid")).trigger("click"),t()}),e.toggle.on("click",function(){0==e.toggleState?s():t()})},h=function(){if(!this.transLine){var t=this.wrapper.find("."+this.currentClass);if(!(t.length<1)){var s=t.css("border-bottom-width"),e=t.css("border-bottom-style"),n=t.css("border-bottom-color"),o=[s,e,n].join(" "),r=t.position().left;this.transLine=$("<div></div>").css({display:"none",position:"absolute",left:0,bottom:0,width:t.width(),height:0,"border-bottom":o,transform:"translateX("+r+"px)","-webkit-transform":"translateX("+r+"px)"}).appendTo(this.wrapper)}}},u=function(){var t=this;$.each(t.navs,function(s,e){var n=$(e);n.hasClass(t.currentClass)&&(t.current=s,h.call(t)),n.addClass(t.logClass),n.attr("data-tid",s),n.on("click",function(){var s=parseInt($(this).attr("data-tid"));s!==t.current&&(t.last=t.current,t.current=s,t.hideTab(t.last),t.showTab(t.current),t.onResetChange==a?(t.hideContent(t.last),t.showContent(t.current),t.onChange.call(t,t.current,t.conts[t.current])):t.onResetChange.call(t,t.current),t.tabScroll&&t.tabScroll.scrollToElement(n[0],500,t.scrollSize,0,"",{autoScroll:!0}))})}),$.each(t.conts,function(s){s==t.current?(t.showTab(s,!0),t.showContent(s),h.call(t)):(t.hideTab(s),t.hideContent(s))})},d=function(t,s){s=s||{},this.panel=t,this.current=s.current||0,this.currentClass=s.currentClass||"c-tabs-nav-selected",this.navWrapperClass=s.navWrapperClass||"c-tabs-nav",this.navClass=s.navClass||"c-tabs-nav-li",this.contClass=s.contClass||"c-tabs-content",this.viewClass=s.viewClass||"c-tabs-nav-view",this.toggleClass=s.toggleClass||"c-tabs-nav-toggle",this.allowScroll=s.allowScroll||!1,this.toggleMore=s.toggleMore||!1,this.toggleLabel=s.toggleLabel||"请选择",this.logClass=s.logClass||"WA_LOG_TAB",this.scrollSize=s.scrollSize||"-40",this.transLine=null,this.navs=[],this.seps=[],this.conts=[],this.sum=0,this.last=null,this.onChange=s.onChange||a,this.onResetChange=s.onResetChange||a,this.onTabScrollEnd=s.onTabScrollEnd,t&&l.call(this,s)};$.extend(d.prototype,{showContent:function(t){var s=this.conts[t];s&&$(this.conts[t]).show()},hideContent:function(t){var s=this.conts[t];s&&$(s).hide()},showTab:function(t,s){{var e,o,r=this,a=r.navs;r.seps}s=s||!1;var l=$(a[t]);s||l.css("border-bottom","none"),l.addClass(r.currentClass),s||(e=100+50*Math.abs(r.current-r.last),o=r.transLine.get(0),r.transLine.show(),n.transform(o,e,"ease-in-out",l.position().left,l.width()).start(function(){l.css("border-bottom",""),r.transLine.hide()}))},hideTab:function(t){{var s=this,e=s.navs;s.seps}$(e[t]).removeClass(s.currentClass)},dispose:function(){this.timer&&clearTimeout(this.timer),$("body").off("onlyshowMore.b_tabs"),o.dispose()}});var g=e("b-tabs-worker",{css:"b-tabs {display:block;}",props:{allowScroll:{type:Boolean,value:!1},toggleMore:{type:Boolean,value:!1},toggleLabel:{type:String,value:"请选择"},current:{type:Number,value:0},scrollSize:{type:Number,value:-40}},holdChild:!0,init:function(){var t=this.getProp(),s=this;this.tab=new d($(this.element).children(".c-tabs"),{allowScroll:t.allowScroll,toggleMore:t.toggleMore,toggleLabel:t.toggleLabel,current:t.current,scrollSize:t.scrollSize,onChange:function(t){s.trigger("change",{current:t},!1)},onResetChange:function(t){this.hideContent(this.last),this.showContent(this.current),s.trigger("resetChange",{current:t},!1),this.onChange(this.current,this.conts[this.current])},onTabScrollEnd:function(t){s.trigger("tabScrollEnd",t,!1)}})},detached:function(){this.tab.dispose()}});return g});